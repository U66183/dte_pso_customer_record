sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/Filter"],function(e,t,o){"use strict";return e.extend("com.pso.changelog.controller.filterinterface",{onInit:function(){this.model=this.getOwnerComponent().getModel();this.localModel=this.getOwnerComponent().getModel("localModel")},readApprByVH:function(e){let t=this.model.bindList("/PSOSpecials");let o=[];t.requestContexts(0,Infinity).then(function(e){e.forEach(e=>{o.push(e.getObject())});this.localModel.setProperty("/PSOSpecials",o)}.bind(this))},onValueHelpApprovedBy:function(e){this._tokensForInput=e.getSource().getId();this.readApprByVH();if(!this.apprDialog){t.load({name:"com.pso.changelog.fragments.approvedby",type:"XML",controller:this}).then(e=>{e.setModel(this.localModel);this.apprDialog=e;this.getView().addDependent(this.apprDialog);var t=this;this.apprDialog.getTableAsync().then(o=>{o.setModel(t.localModel);if(o.bindRows){o.bindAggregation("rows",{path:"/PSOSpecials",events:{dataReceived:function(){e.update()}}})}o.addColumn(new sap.ui.table.Column({label:"Approved By",template:new sap.m.Text({text:"{approvedBy}"})}));if(o.bindItems){o.bindAggregation("items",{path:"/PSOSpecials",template:new sap.m.ColumnListItem({cells:[new sap.m.Label({text:"{approvedBy}"})]}),events:{dataReceived:function(){e.update()}}});o.addColumn(new sap.m.Column({header:new sap.m.Label({text:"Approved By"})}))}});e.update();this.apprDialog.open()})}else{this.apprDialog.open()}},onValueHelpConnObj:function(e){this._tokensForInput=e.getSource().getId();if(!this.localModel.getData().hasOwnProperty("PSOSpecials")){this.readApprByVH()}if(!this.conObjDialog){t.load({name:"com.pso.changelog.fragments.connecObj",type:"XML",controller:this}).then(e=>{e.setModel(this.localModel);this.conObjDialog=e;this.getView().addDependent(this.conObjDialog);var t=this;this.conObjDialog.getTableAsync().then(o=>{o.setModel(t.localModel);if(o.bindRows){o.bindAggregation("rows",{path:"/PSOSpecials",events:{dataReceived:function(){e.update()}}})}o.addColumn(new sap.ui.table.Column({label:"Connection Object",template:new sap.m.Text({text:"{connection_object}"})}));if(o.bindItems){o.bindAggregation("items",{path:"/PSOSpecials",template:new sap.m.ColumnListItem({cells:[new sap.m.Label({text:"{connection_object}"})]}),events:{dataReceived:function(){e.update()}}});o.addColumn(new sap.m.Column({header:new sap.m.Label({text:"Connection Object"})}))}});e.update();this.conObjDialog.open()})}else{this.conObjDialog.open()}},onValueHelpCancelPress:function(e){this._tokensForInput=undefined;e.getSource().close()},onValueHelpOkPress:function(e){if(this._tokensForInput!==undefined){this.byId(this._tokensForInput).setTokens(e.getSource()._getTokenizer().getTokens())}this._tokensForInput=undefined;e.getSource().close()},onRowSelect:function(e){this.getOwnerComponent().getModel("localModel").setProperty("/selectedItem",e.getParameters().listItem.getBindingContext().getObject());this.getOwnerComponent().getRouter().navTo("RoutedetailPage",{ID:e.getParameters().listItem.getBindingContext().getObject().ID,connection_object:e.getParameters().listItem.getBindingContext().getObject().connection_object})},onFilterBarSearch:function(e){let t=[];e.getParameter("selectionSet").forEach(e=>{e.getTokens().forEach(n=>{t.push(new o(e.getParent().getName(),"EQ",n.getKey()))})});this.byId("idTable").getBinding("items").filter(t)},onTokenUpdate:function(e){let t;if(e.getParameter("type")=="removed"){t=e.getSource().getTokens().length-1}if(t==0){if(e.getSource().getParent().getName()=="approvedBy"){if(this.apprDialog){this.apprDialog._getTokenizer().removeAllTokens();let e=this.apprDialog.getTable().getSelectedIndices().sort();this.apprDialog.getTable().removeSelectionInterval(e[0],e[e.length-1]);this.apprDialog.getTable()._updateSelection()}}if(e.getSource().getParent().getName()=="connection_object"){if(this.conObjDialog){this.conObjDialog._getTokenizer().removeAllTokens();let e=this.conObjDialog.getTable().getSelectedIndices().sort();this.conObjDialog.getTable().removeSelectionInterval(e[0],e[e.length-1]);this.conObjDialog.getTable()._updateSelection()}}}}})});
//# sourceMappingURL=filterinterface.controller.js.map