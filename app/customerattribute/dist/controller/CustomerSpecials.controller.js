sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/m/MessageBox"],function(e,t,i){"use strict";return e.extend("com.pso.customerattribute.controller.CustomerSpecials",{onInit:function(){var e=this.getOwnerComponent().getRouter();e.getRoute("CustomerSpecials").attachMatched(function(e){this._loadFragmentPerScope(e.getParameter("arguments").scope)},this)},_loadFragmentPerScope:function(e){var t=e;if(e==="cd_create"){this.getView().byId("idpanelCreateSpecials").setVisible(true);this.getView().byId("idpanelDiplaySpecials").setVisible(false);this.getView().byId("_IDButtonSaveDraft").setVisible(true);this.getView().byId("_IDButtonSaveSubmit").setVisible(true);this.getView().byId("_IDEditSpecials").setVisible(false)}else{this.getView().byId("idpanelCreateSpecials").setVisible(false);this.getView().byId("idpanelDiplaySpecials").setVisible(true);this.getView().byId("_IDButtonSaveDraft").setVisible(false);this.getView().byId("_IDButtonSaveSubmit").setVisible(false);this.getView().byId("_IDEditSpecials").setVisible(true)}var i=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().record_status;if(i==="submitted"){this.getView().byId("idSpecialsStatusMessage").setText("Record is submitted for approval.");this.getView().byId("_IDEditSpecials").setVisible(false)}else if(i==="approved"){this.getView().byId("idSpecialsStatusMessage").setText("Record is approved. Any edit will create a new version.")}else if(i==="rejected"){this.getView().byId("idSpecialsStatusMessage").setText("Record is rejected. Please modify and submit for approval.")}else if(i==="draft"){this.getView().byId("idSpecialsStatusMessage").setText("Record is in draft version.")}else{this.getView().byId("idSpecialsStatusMessage").setText("")}},onAfterRendering:function(){const e=this.getOwnerComponent().getModel("oCustomerAttributesJModel").getData().conn_obj;console.log(e)},onSaveAsDraftSpecials:async function(e){var t=this.getCreateContext();console.log(t);var s=this.getOwnerComponent().getModel();const o=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().ID;const n=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().connection_object;if(o===undefined||o===null||o===""){var a=s.bindContext("/createSpecials(...)")}else{var a=s.bindContext("/updateSpecials(...)");a.setParameter("ID",o)}a.setParameter("context",t);var c=this;await a.execute().then(function(e){var t=a.getBoundContext().getObject();console.log(t.value);i.success("PSO Specials Record for connection object "+n+" saved successfully!!!",{actions:[i.Action.OK],emphasizedAction:i.Action.OK,onClose:function(e){window.history.go(-1)},dependentOn:c.getView()});console.log("success: = ")}.bind(this),function(e){console.log("failure: = "+e.message)}.bind(this))},onSubmitSpecials:async function(e){var t=this.getOwnerComponent().getModel();var i=t.bindContext("/submitSpecials(...)");var s=this.getCreateContext();i.setParameter("context",s);var o=this.getOwnerComponent().getModel("oSpecialsjmodel").getData();if(o){i.setParameter("recordID",o.ID)}await i.execute().then(function(e){var t=i.getBoundContext().getObject();console.log(t.value);console.log("success onSubmitSpecials ")}.bind(this),function(e){console.log("failure: = "+e.message)}.bind(this))},getCreateContext:function(){var e=this.getOwnerComponent().getModel("oSpecialsjmodel").getData();if(e.connection_object===""){e.connection_object=this.getOwnerComponent().getModel("oCustomerAttributesJModel").getData().conn_obj}var t={connection_object:e.connection_object,work_desc:e.work_desc,meter_number:e.meter_number};console.log(t);return t},onEditSpecials:function(){this.getView().byId("idpanelCreateSpecials").setVisible(true);this.getView().byId("idpanelDiplaySpecials").setVisible(false);this.getView().byId("_IDButtonSaveDraft").setVisible(true);this.getView().byId("_IDButtonSaveSubmit").setVisible(true);this.getView().byId("_IDEditSpecials").setVisible(false)},onBack:function(){window.history.go(-1)}})});
//# sourceMappingURL=CustomerSpecials.controller.js.map