sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/m/MessageBox"],function(e,t,i){"use strict";return e.extend("com.pso.customerattribute.controller.CustomerSpecials",{onInit:function(){var e=this.getOwnerComponent().getRouter();e.getRoute("CustomerSpecials").attachMatched(function(e){this._loadFragmentPerScope(e.getParameter("arguments").scope)},this)},_loadFragmentPerScope:function(e){var t=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().ID;if(t===undefined||t===""||t===null){this.newPSORecord=true}else{this.newPSORecord=false}var i=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().record_status;this.record_status=i;if(this.newPSORecord){this.onEditSpecials();this.getView().byId("idSpecialsStatusMessage").setText("Initial Version")}else{this.onDisplaySpecials();if(i!==undefined&&i!==""&&i!==null){if(i==="submitted"){this.getView().byId("idSpecialsStatusMessage").setText("Record is submitted for approval.");this.getView().byId("_IDEditSpecials").setVisible(false)}else if(i==="approved"){this.getView().byId("idSpecialsStatusMessage").setText("Record is approved. Any edit will create a new version.")}else if(i==="rejected"){this.getView().byId("idSpecialsStatusMessage").setText("Record is rejected. Please modify and submit for approval.")}else if(i==="draft"){this.getView().byId("idSpecialsStatusMessage").setText("Record is in draft version.")}}}},setVisibleCreateSpecialPanel:function(e){this.getView().byId("idpanelCreateSpecials").setVisible(e)},onEditSpecials:function(){this.setVisibleCreateSpecialPanel(true);this.getView().byId("_IDButtonSaveDraft").setVisible(true);this.getView().byId("_IDButtonSaveSubmit").setVisible(true);this.getView().byId("idpanelDisplaySpecials").setVisible(false);this.getView().byId("_IDEditSpecials").setVisible(false)},onDisplaySpecials:function(){this.setVisibleCreateSpecialPanel(false);this.getView().byId("_IDButtonSaveDraft").setVisible(false);this.getView().byId("_IDButtonSaveSubmit").setVisible(false);this.getView().byId("idpanelDisplaySpecials").setVisible(true);this.getView().byId("_IDEditSpecials").setVisible(true)},onAfterRendering:function(){const e=this.getOwnerComponent().getModel("oCustomerAttributesJModel").getData().conn_obj;console.log(e)},onSaveAsDraftSpecials:async function(e){var t=this.getCreateContext();console.log(t);var o=this.getOwnerComponent().getModel();const s=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().ID;const n=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().record_status;const a=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().connection_object;if(s===undefined||s===null||s===""||n==="approved"){var c=o.bindContext("/createSpecials(...)")}else{var c=o.bindContext("/updateSpecials(...)");c.setParameter("recordID",s)}c.setParameter("context",t);var r=this;await c.execute().then(function(e){var t=c.getBoundContext().getObject();i.success("PSO Specials Record for connection object "+a+" saved successfully!!!",{actions:[i.Action.OK],emphasizedAction:i.Action.OK,onClose:function(e){window.history.go(-2)},dependentOn:r.getView()});console.log("success: = ")}.bind(this),function(e){console.log("failure: = "+e.message)}.bind(this))},onSubmitSpecials:async function(e){var t=this;const o=this.getOwnerComponent().getModel("oSpecialsjmodel").getData().connection_object;var s=this.getOwnerComponent().getModel("oSpecialsjmodel").getData();var n=this.getCreateContext();var a=this.getOwnerComponent().getModel();if(this.newPSORecord||this.record_status==="approved"){var c=a.bindContext("/createAndSubmitSpecials(...)")}else{var c=a.bindContext("/submitSpecials(...)");c.setParameter("recordID",s.ID)}c.setParameter("context",n);await c.execute().then(function(e){var s=c.getBoundContext().getObject();i.success("PSO Specials Record for connection object "+o+" submitted successfully!!!",{actions:[i.Action.OK],emphasizedAction:i.Action.OK,onClose:function(e){window.history.go(-2)},dependentOn:t.getView()});console.log("success onSubmitSpecials ")}.bind(this),function(e){console.log("failure: = "+e.message)}.bind(this))},getCreateContext:function(){var e=this.getOwnerComponent().getModel("oSpecialsjmodel").getData();var t=this.getView().byId("idRadio1_CS").getSelectedButton().getText();var i=this.getView().byId("grop5CPSR_CS").getSelectedButton().getText();var o=this.getView().byId("idOwnedGrp").getSelectedButton().getText();var s=this.getView().byId("goup6CPSR_CS").getSelectedButton().getText();if(e.connection_object===""||e.connection_object===null||e.connection_object===undefined){e.connection_object=this.getOwnerComponent().getModel("oCustomerAttributesJModel").getData().conn_obj}var n={connection_object:e.connection_object,work_desc:e.work_desc,meter_number:e.meter_number,record_status:"draft",workflow_id:null,pSNumber:e.pSNumber,fedFrom:e.fedFrom,cableDescription:e.cableDescription,cableFootage:e.cableFootage,ductType:e.ductType,cts:e.cts,pts:e.pts,k:e.k,m:e.m,fusesAt:e.fusesAt,size:e.size,typeCR:e.typeCR,curve:e.curve,voltage:e.voltage,ownedByLBD:t,manufacturer:e.manufacturer,model:e.model,continuousCurrent:e.continuousCurrent,loadIntRating:e.loadIntRating,kAMomentaryLBD:e.kAMomentaryLBD,typeLBD:e.typeLBD,faultClosing:e.faultClosing,bilLBD:e.bilLBD,serviceVoltage:e.serviceVoltage,CycWithstand60:e.CycWithstand60,fuelTypeCB:s,ownedByCB:i,circuitBreakerMake:e.circuitBreakerMake,serialNo:e.serialNo,kAMomentaryCB:e.kAMomentaryCB,amps:e.amps,typeCB:e.typeCB,faultDuty:e.faultDuty,bilCB:e.bilCB,ownedByTransformer:o};console.log(n);return n},onBack:function(){window.history.go(-1)}})});
//# sourceMappingURL=CustomerSpecials.controller.js.map